(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{40:function(e){e.exports=JSON.parse('{"a":[{"title":"Paris","lat":48.85661,"lng":2.351499,"zoom":13},{"title":"Cologne","lat":50.938361,"lng":6.959974,"zoom":13},{"title":"Brussels","lat":50.846557,"lng":4.351697,"zoom":13},{"title":"Amsterdam","lat":52.37454,"lng":4.897976,"zoom":13},{"title":"Hamburg","lat":53.550341,"lng":10.000654,"zoom":13},{"title":"Dusseldorf","lat":51.225402,"lng":6.776314,"zoom":13}]}')},78:function(e,t,a){"use strict";a.r(t),a.d(t,"store",(function(){return na}));var r,n=a(1),s=a.n(n),c=a(18),i=a.n(c),o=a(5),l=a(38),u=a.n(l),d="six-cities-token";!function(e){e[e.Unauthorized=401]="Unauthorized"}(r||(r={}));var j,m,f=a(2),p=a(6),b=a(8),h=a(40);!function(e){e.Root="/",e.Login="/login",e.Favorites="/favorites",e.Room="/offer/"}(j||(j={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(m||(m={}));var _,O=1,v=2,x=3,g=4,N=5,y=[5,4,3,2,1],w=0,k=20,R=40,S=60,C=80,A=100,F=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"];!function(e){e.Default="/six-cities/img/pin.svg",e.Active="/six-cities/img/pin-active.svg"}(_||(_={}));var L,P=[20,30],I=[10,30],z=new Map([["Home","page__main--index"],["LogIn","page__main--login"],["Favorites","page__main--favorites"],["Property","page__main--property"],["undefined","page__main--undefined"]]);!function(e){e.Home="Home",e.LogIn="LogIn",e.Favorites="Favorites",e.Property="Property",e[void 0]="undefined"}(L||(L={}));var D,T,M={article:"cities__place-card",image:"cities__image-wrapper",info:""},U={article:"favorites__card",image:"favorites__image-wrapper",info:"favorites__card-info"},H={article:"near-places__card",image:"near-places__image-wrapper",info:""},E=18,Y=19,G=31,q=33,B="150",J="110",W="260",Z="200",K="https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",V='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',$=13,Q=13,X={width:1144,height:579},ee={width:512,height:752},te={footer:{width:"64",height:"33"},header:{width:"81",height:"41"}};!function(e){e.Popular="Popular",e.Asc="Price: low to high",e.Desc="Price: high to low",e.Rated="Top rated first"}(D||(D={})),function(e){e.Offers="/hotels",e.Favorite="/favorite",e.Comments="/comments",e.Login="/login",e.Logout="logout"}(T||(T={}));var ae=h.a,re=a(21),ne=a.n(re),se=function(e){switch(e=Math.round(e)){case O:return k;case v:return R;case x:return S;case g:return C;case N:return A;default:return w}},ce=function(e,t){return Math.sign(t.rating-e.rating)},ie=function(e,t){return Math.sign(t.price-e.price)},oe=function(e,t){return Math.sign(e.price-t.price)},le=function(e,t){return ne()(t.date).diff(ne()(e.date))},ue=function(e,t){switch(t){case D.Popular:return e.sort(ce);case D.Asc:return e.sort(oe);case D.Desc:return e.sort(ie);case D.Rated:default:return e.sort(ce)}},de=a(4),je=a.n(de),me=a(0);function fe(e){var t=e.place,a=je()({"footer__logo-link":t===te.footer,"header__logo-link":t===te.header}),r=je()({footer__logo:t===te.footer,header__logo:t===te.header});return Object(me.jsx)(b.a,{className:a,to:"/",children:Object(me.jsx)("img",{className:r,src:"img/logo.svg",alt:"6 cities logo",width:t.width,height:t.height})})}var pe,be=a(20),he=a(9);!function(e){e.LoadOffers="main/loadOffers",e.LoadOffersNearby="offer/loadOffersNearby",e.LoadFavoriteOffers="main/loadFavoriteOffers",e.LoadInfoAboutOffer="offer/loadInfoAboutOffer",e.LoadCommentsAboutOffer="offer/loadCommentsAboutOffer",e.DeleteAuthorization="user/logout",e.RedirectToRoute="user/redirectToRoute",e.SetActiveCity="main/setActiveCity",e.SetOfferActive="offer/setOfferActive",e.SetAuthStatus="user/login",e.SetSortOffers="main/setSortOffers",e.SetUserInfo="user/setUserInfo",e.SetRating="offer/setRating",e.SetTextComment="offer/setTextComment"}(pe||(pe={}));var _e,Oe,ve=Object(o.b)(pe.LoadOffers),xe=Object(o.b)(pe.LoadOffersNearby),ge=Object(o.b)(pe.LoadInfoAboutOffer),Ne=Object(o.b)(pe.LoadFavoriteOffers),ye=Object(o.b)(pe.LoadCommentsAboutOffer),we=Object(o.b)(pe.SetActiveCity),ke=Object(o.b)(pe.SetOfferActive),Re=Object(o.b)(pe.SetSortOffers),Se=Object(o.b)(pe.SetUserInfo),Ce=Object(o.b)(pe.SetRating),Ae=Object(o.b)(pe.SetTextComment),Fe=Object(o.b)(pe.SetAuthStatus),Le=Object(o.b)(pe.DeleteAuthorization),Pe=Object(o.b)(pe.RedirectToRoute),Ie={city:ae.filter((function(e){return e.title===F[0]}))[0],offers:[],isDataLoaded:!1,sort:"Popular",favorites:[]},ze=Object(o.c)(Ie,(function(e){e.addCase(we,(function(e,t){var a=ae.filter((function(e){return e.title===t.payload.title}))[0];e.city={title:a.title,lat:a.lat,lng:a.lng,zoom:a.zoom}})).addCase(ve,(function(e,t){e.offers=ue(t.payload,e.sort),e.isDataLoaded=!0})).addCase(Re,(function(e,t){e.sort=t.payload,e.offers=ue(e.offers,t.payload)})).addCase(Ne,(function(e,t){e.favorites=t.payload}))})),De={authorizationStatus:m.Unknown,user:void 0},Te=Object(o.c)(De,(function(e){e.addCase(Fe,(function(e,t){e.authorizationStatus=t.payload})).addCase(Le,(function(e){e.authorizationStatus=m.NoAuth})).addCase(Se,(function(e,t){e.user=t.payload}))})),Me={focus:void 0,info:void 0,comments:[],nearby:[],newCommentText:"",newCommentRating:0},Ue=Object(o.c)(Me,(function(e){e.addCase(ke,(function(e,t){e.focus=t.payload})).addCase(xe,(function(e,t){e.nearby=t.payload})).addCase(ge,(function(e,t){e.info=t.payload})).addCase(ye,(function(e,t){e.comments=t.payload})).addCase(Ce,(function(e,t){e.newCommentRating=t.payload})).addCase(Ae,(function(e,t){e.newCommentText=t.payload}))}));!function(e){e.mainReducer="MAIN",e.userReducer="USER",e.offerReducer="OFFER"}(Oe||(Oe={}));var He=Object(he.c)((_e={},Object(be.a)(_e,Oe.mainReducer,ze),Object(be.a)(_e,Oe.userReducer,Te),Object(be.a)(_e,Oe.offerReducer,Ue),_e)),Ee=function(e){return e[Oe.userReducer].authorizationStatus},Ye=function(e){return e[Oe.userReducer].user},Ge=a(7),qe=a.n(Ge),Be=a(15),Je=a(17),We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{bedrooms:e.bedrooms,city:{location:Object(Je.a)({},e.city.location),name:e.city.name},description:e.description,goods:e.goods,host:{avatarUrl:e.host.avatar_url,id:e.host.id,isPro:e.host.is_pro,name:e.host.name},id:e.id,images:e.images,isFavorite:e.is_favorite,isPremium:e.is_premium,location:Object(Je.a)({},e.location),maxAdults:e.max_adults,previewImage:e.preview_image,price:e.price,rating:e.rating,title:e.title,type:e.type}}))},Ze=function(e){return{bedrooms:e.bedrooms,city:{location:Object(Je.a)({},e.city.location),name:e.city.name},description:e.description,goods:e.goods,host:{avatarUrl:e.host.avatar_url,id:e.host.id,isPro:e.host.is_pro,name:e.host.name},id:e.id,images:e.images,isFavorite:e.is_favorite,isPremium:e.is_premium,location:Object(Je.a)({},e.location),maxAdults:e.max_adults,previewImage:e.preview_image,price:e.price,rating:e.rating,title:e.title,type:e.type}},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{comment:e.comment,date:e.date,id:e.id,rating:e.rating,user:{avatarUrl:e.user.avatar_url,id:e.user.id,isPro:e.user.is_pro,name:e.user.name}}}))},Ve=function(e){return{avatarUrl:e.avatar_url,email:e.email,id:e.id,isPro:e.is_pro,name:e.name,token:e.token}},$e=a(23),Qe=function(){return function(){var e=Object(Be.a)(qe.a.mark((function e(t,a,r){var n,s,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(T.Offers);case 2:n=e.sent,s=n.data,c=We(s),t(ve(c));case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()},Xe=function(e){return function(){var t=Object(Be.a)(qe.a.mark((function t(a,r,n){var s,c,i,o;return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(T.Comments,"/").concat(e),t.next=3,n.get(s);case 3:c=t.sent,i=c.data,(o=Ke(i)).sort(le),a(ye(o));case 8:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()},et=function(){return function(){var e=Object(Be.a)(qe.a.mark((function e(t,a,r){var n,s,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(T.Favorite);case 2:n=e.sent,s=n.data,c=We(s),t(Ne(c));case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()};function tt(e){var t=e.page,a=Object(f.d)(Ee),r=Object(f.d)(Ye),n=Object(f.c)(),s=function(){n(function(){var e=Object(Be.a)(qe.a.mark((function e(t,a,r){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.delete(T.Logout),localStorage.removeItem(d),t(Le());case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}())};return Object(me.jsx)("header",{className:"header",children:Object(me.jsx)("div",{className:"container",children:Object(me.jsxs)("div",{className:"header__wrapper",children:[Object(me.jsx)("div",{className:"header__left",children:Object(me.jsx)(fe,{place:te.header})}),t!==L.LogIn&&Object(me.jsx)("nav",{className:"header__nav",children:Object(me.jsxs)("ul",{className:"header__nav-list",children:[Object(me.jsx)("li",{className:"header__nav-item user",children:a===m.Auth&&r&&Object(me.jsxs)(b.a,{to:j.Favorites,className:"header__nav-link header__nav-link--profile",href:"#/",children:[Object(me.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper",style:{backgroundImage:"url(".concat(r.avatarUrl,")"),borderRadius:"50%"}}),Object(me.jsx)("span",{className:"header__user-name user__name",children:r.name})]})}),Object(me.jsx)("li",{className:"header__nav-item",children:a===m.Auth?Object(me.jsx)(b.a,{to:j.Root,className:"header__nav-link",href:"#/",onClick:function(){return s()},children:Object(me.jsx)("span",{className:"header__signout",children:"Sign out"})}):Object(me.jsx)(b.a,{to:j.Login,className:"header__nav-link",href:"#/",children:Object(me.jsx)("span",{className:"header__signin",children:"Sign in"})})})]})})]})})})}function at(e){var t=e.children,a=e.page;return Object(me.jsx)("main",{className:je()("page__main",z.get(a)),children:t})}var rt=function(){return Object(me.jsx)("footer",{className:"footer container",children:Object(me.jsx)(fe,{place:te.footer})})};function nt(e){var t=e.children,a=e.page,r=e.isHome,n=e.isLogIn,s=e.isGrey,c=je()("page",{"page--main":r,"page--login":n,"page--gray":s});return Object(me.jsxs)("div",{className:c,children:[Object(me.jsx)(tt,{page:a}),Object(me.jsx)(at,{page:a,children:t}),a===L.Favorites&&Object(me.jsx)(rt,{})]})}var st=function(e){return e[Oe.mainReducer].city},ct=function(e){return e[Oe.mainReducer].offers},it=function(e){return e[Oe.mainReducer].favorites},ot=function(e){return e[Oe.mainReducer].sort};function lt(e){var t=e.cityItem,a=Object(f.d)(st),r=ae.filter((function(e){return e.title===t}))[0],n=Object(f.c)(),s=a.title===t;return Object(me.jsx)("li",{className:"locations__item",children:Object(me.jsx)("a",{className:je()("locations__item-link tabs__item",{"tabs__item--active":s}),href:"#/",onClick:function(e){e.preventDefault(),n(we(r))},children:Object(me.jsx)("span",{children:t})})})}function ut(){return Object(me.jsx)("div",{className:"tabs",children:Object(me.jsx)("section",{className:"locations container",children:Object(me.jsx)("ul",{className:"locations__list tabs__list",children:F.map((function(e){return Object(me.jsx)(lt,{cityItem:e},e)}))})})})}var dt=a(24);function jt(){var e=Object(n.useState)(!1),t=Object(dt.a)(e,2),a=t[0],r=t[1],s=Object(f.d)(ot),c=Object(f.c)();return Object(me.jsxs)("form",{className:"places__sorting",action:"#",method:"get",children:[Object(me.jsx)("span",{className:"places__sorting-caption",children:"Sort by"}),Object(me.jsxs)("span",{className:"places__sorting-type",tabIndex:0,onClick:function(){r(!a)},children:[s,Object(me.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(me.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(me.jsx)("ul",{className:je()("places__options places__options--custom",{"places__options--open":!0===a}),children:Object.values(D).map((function(e){return Object(me.jsx)("li",{className:"places__option",tabIndex:0,onClick:function(){c(Re(e)),r(!a)},children:e},e)}))})]})}function mt(e){var t=e.imageClass,a=e.pathToOffer,r=e.width,n=e.height,s=e.offer.previewImage;return Object(me.jsx)("div",{className:je()("place-card__image-wrapper",t),children:Object(me.jsx)(b.a,{to:a,children:Object(me.jsx)("img",{className:"place-card__image",src:s,width:r,height:n,alt:"Place"})})})}function ft(e){var t=e.rating,a=e.isPropertyDetail,r=je()("rating",{property__rating:a,"place-card__rating":!a}),n=je()("rating__stars",{property__stars:a,"place-card__stars":!a});return Object(me.jsx)("div",{className:r,children:Object(me.jsxs)("div",{className:n,children:[Object(me.jsx)("span",{style:{width:"".concat(se(t),"%")}}),Object(me.jsx)("span",{className:"visually-hidden",children:"Rating"})]})})}function pt(e){var t=e.isFavorite,a=e.isPropertyDetail,r=e.forOffer,n=Object(f.c)(),s=Object(f.d)(Ee),c=a?G:E,i=a?q:Y,o=a?"property__bookmark-icon":"place-card__bookmark-icon",l={id:r,status:t?0:1},u=je()("button",{"property__bookmark-button":a,"place-card__bookmark-button":!a,"property__bookmark-button--active":t&&a,"place-card__bookmark-button--active":t&&!a});return Object(me.jsxs)("button",{className:u,type:"button",onClick:function(){s===m.Auth?n(function(e){var t=e.id,a=e.status;return function(){var e=Object(Be.a)(qe.a.mark((function e(r,n,s){var c,i,o,l;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(T.Favorite,"/").concat(t,"/").concat(a),e.next=3,s.post(c);case 3:i=e.sent,o=i.data,l=Ze(o),r(ge(l)),r(Qe()),r(et());case 9:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()}(l)):n(Pe(j.Login))},children:[Object(me.jsx)("svg",{className:o,width:c,height:i,children:Object(me.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(me.jsxs)("span",{className:"visually-hidden",children:[t?"In":"To","  bookmarks"]})]})}function bt(e){var t=e.infoClass,a=e.pathToOffer,r=e.offer,n=r.isFavorite,s=r.rating,c=r.price,i=r.title,o=r.type,l=r.id;return Object(me.jsxs)("div",{className:je()("place-card__info",t),children:[Object(me.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(me.jsxs)("div",{className:"place-card__price",children:[Object(me.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",c]}),Object(me.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(me.jsx)(pt,{isFavorite:n,forOffer:l})]}),Object(me.jsx)(ft,{rating:s}),Object(me.jsx)("h2",{className:"place-card__name",children:Object(me.jsx)(b.a,{to:a,children:i})}),Object(me.jsx)("p",{className:"place-card__type",children:o})]})}function ht(e){var t=e.isPropertyDetail?"property__mark":"place-card__mark";return Object(me.jsx)("div",{className:t,children:Object(me.jsx)("span",{children:"Premium"})})}function _t(e){var t=e.offer,a=e.classes,r=e.page,n=e.handleStateSet,s=e.handleStateReset,c=t.isPremium,i="".concat(j.Room).concat(t.id);return Object(me.jsxs)("article",{className:je()("place-card",a.article),onMouseEnter:n,onMouseLeave:s,children:[c&&Object(me.jsx)(ht,{}),Object(me.jsx)(mt,{imageClass:a.image,pathToOffer:i,width:r===L.Favorites?B:W,height:r===L.Favorites?J:Z,offer:t}),Object(me.jsx)(bt,{infoClass:a.info,pathToOffer:i,offer:t})]})}function Ot(e){var t=e.offers,a=e.classes,r=e.page,n=Object(f.c)(),s=function(e){n(ke(e))};return Object(me.jsx)(me.Fragment,{children:t.map((function(e){var t=e.id;return Object(me.jsx)(_t,{offer:e,classes:a,page:r,handleStateSet:function(){return s(e)},handleStateReset:function(){return s(void 0)}},t)}))})}var vt=a(16),xt=a.n(vt);a(76);var gt=function(e){return e[Oe.offerReducer].focus},Nt=function(e){return e[Oe.offerReducer].info},yt=function(e){return e[Oe.offerReducer].comments},wt=function(e){return e[Oe.offerReducer].nearby},kt=function(e){return e[Oe.offerReducer].newCommentRating},Rt=function(e){return e[Oe.offerReducer].newCommentText},St=function(e){var t={iconUrl:e,iconSize:P,iconAnchor:I};return new vt.Icon(t)},Ct=St(_.Default),At=St(_.Active),Ft=xt.a.layerGroup();function Lt(e){var t=e.height,a=e.width,r=e.zoom,s=e.offers,c=e.lat,i=e.lng,o=Object(f.d)(gt),l=Object(n.useRef)(null),u=function(e,t,a,r){var s=Object(n.useState)(null),c=Object(dt.a)(s,2),i=c[0],o=c[1],l=Object(p.g)();return Object(n.useEffect)((function(){if(null!==e.current&&null===i){var n=new vt.Map(e.current,{center:{lat:a,lng:r},zoom:t});"/"!==l.pathname&&new vt.Marker({lat:a,lng:r}).setIcon(At).addTo(n);var s=new vt.TileLayer(K,{attribution:V});n.addLayer(s),o(n)}else"/"!==l.pathname&&i&&new vt.Marker({lat:a,lng:r}).setIcon(At).addTo(i),i&&i.setView([a,r])}),[a,r,l.pathname,i,e,t]),i}(l,r,c,i),d=s.map((function(e){return e.location})),j=void 0!==o&&o.location;return u&&Ft.addTo(u),Object(n.useEffect)((function(){u&&function(e,t,a){Ft.clearLayers(),e.forEach((function(e){var t=e.latitude,r=e.longitude,n=new vt.Marker({lat:t,lng:r}),s=!1!==a&&!0!==a&&void 0!==a&&t===a.latitude&&r===a.longitude;n.setIcon(s?At:Ct).addTo(Ft)}))}(d,0,j)}),[j,u,d]),Object(me.jsx)("section",{className:"cities__map map",style:{height:"".concat(t,"px"),width:"".concat(a,"px")},ref:l})}function Pt(){var e=Object(f.d)(ct),t=Object(f.d)(st),a=function(e,t){return e.filter((function(e){return e.city.name===t}))}(e,t.title);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)("section",{className:"cities__places places",children:[Object(me.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(me.jsxs)("b",{className:"places__found",children:[a.length," places to stay in ",t.title]}),Object(me.jsx)(jt,{}),Object(me.jsx)("div",{className:"cities__places-list places__list tabs__content",children:Object(me.jsx)(Ot,{offers:a,classes:M,page:L.Home})})]}),Object(me.jsx)("div",{className:"cities__right-section",children:Object(me.jsx)(Lt,{offers:a,height:ee.height,width:ee.width,zoom:$,lat:t.lat,lng:t.lng})})]})}function It(){var e,t=Object(f.d)(st);return null===(e=document.querySelector(".page--main"))||void 0===e||e.classList.add("page__main--index-empty"),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("section",{className:"cities__no-places",children:Object(me.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(me.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(me.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",t.title]})]})}),Object(me.jsx)("div",{className:"cities__right-section"})]})}function zt(){var e=0===Object(f.d)(ct).length;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(me.jsx)(ut,{}),Object(me.jsx)("div",{className:"cities",children:Object(me.jsx)("div",{className:je()("cities__places-container container",{"cities__places-container--empty":e}),children:e?Object(me.jsx)(It,{}):Object(me.jsx)(Pt,{})})})]})}function Dt(){var e=Object(f.d)(st),t=Object(f.d)(Ee),a=Object(n.useRef)(null),r=Object(n.useRef)(null),s=Object(f.c)();Object(n.useEffect)((function(){t===m.Auth&&s(Pe(j.Root))}),[t,s]);return Object(me.jsxs)("div",{className:"page__login-container container",children:[Object(me.jsxs)("section",{className:"login",children:[Object(me.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(me.jsxs)("form",{className:"login__form form",action:"",onSubmit:function(e){e.preventDefault(),null!==a.current&&null!==r.current&&s(function(e){var t=e.email,a=e.password;return function(){var e=Object(Be.a)(qe.a.mark((function e(r,n,s){var c,i,o;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post(T.Login,{email:t,password:a});case 2:c=e.sent,n=(i=c.data).token,localStorage.setItem(d,n),o=Ve(i),r(Se(o)),r(Fe(m.Auth)),r(Pe(j.Root));case 9:case"end":return e.stop()}var n}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()}({email:a.current.value,password:r.current.value}))},children:[Object(me.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(me.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(me.jsx)("input",{className:"login__input form__input",type:"email",name:"email",placeholder:"Email",ref:a,required:!0})]}),Object(me.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(me.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(me.jsx)("input",{className:"login__input form__input",type:"password",name:"password",placeholder:"Password",ref:r,required:!0,pattern:"^(?=(.*?[0-9]){1})(?=.*?[a-zA-Z])[0-9A-Za-z]{2,20}$"})]}),Object(me.jsx)("label",{className:"prompt",children:"* Password, must contain at least one letter and number."}),Object(me.jsx)("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(me.jsx)("section",{className:"locations locations--login locations--current",children:Object(me.jsx)("div",{className:"locations__item",children:Object(me.jsx)("a",{className:"locations__item-link",href:"#/",children:Object(me.jsx)("span",{children:e.title})})})})]})}function Tt(){return Object(me.jsx)("div",{className:"page__favorites-container container",children:Object(me.jsxs)("section",{className:"favorites favorites--empty",children:[Object(me.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(me.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(me.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(me.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})})}function Mt(e){var t=e.offers,a=e.city;return Object(me.jsxs)("li",{className:"favorites__locations-items",children:[Object(me.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(me.jsx)("div",{className:"locations__item",children:Object(me.jsx)("a",{className:"locations__item-link",href:"#/",children:Object(me.jsx)("span",{children:a})})})}),Object(me.jsx)("div",{className:"favorites__places",children:Object(me.jsx)(Ot,{offers:t,classes:U,page:L.Favorites})})]})}function Ut(){var e=Object(f.c)(),t=Object(f.d)(it);Object(n.useEffect)((function(){e(et())}),[e]);var a=t.reduce((function(e,t){var a=t.city.name,r=t.isFavorite,n=e[a]||[];return r&&n.push(t),e[a]=n,e}),{});return 0===t.length?Object(me.jsx)(Tt,{}):Object(me.jsx)("div",{className:"page__favorites-container container",children:Object(me.jsxs)("section",{className:"favorites",children:[Object(me.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(me.jsx)("ul",{className:"favorites__list",children:F.map((function(e){return a[e]&&0!==a[e].length&&Object(me.jsx)(Mt,{city:e,offers:a[e]},e)}))})]})})}var Ht=a(41),Et=a.n(Ht);function Yt(e){var t=e.images;return Object(me.jsx)("div",{className:"property__gallery-container container",children:Object(me.jsx)("div",{className:"property__gallery",children:null===t||void 0===t?void 0:t.map((function(e){var t=Et()();return Object(me.jsx)("div",{className:"property__image-wrapper",children:Object(me.jsx)("img",{className:"property__image",src:e,alt:"Studio"})},t)}))})})}function Gt(e){var t=e.features;return Object(me.jsxs)("div",{className:"property__inside",children:[Object(me.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(me.jsx)("ul",{className:"property__inside-list",children:t&&t.map((function(e){return Object(me.jsx)("li",{className:"property__inside-item",children:e},e)}))})]})}function qt(e){var t=e.offer;return Object(me.jsxs)(me.Fragment,{children:[t.isPremium&&Object(me.jsx)(ht,{isPropertyDetail:!0}),Object(me.jsxs)("div",{className:"property__name-wrapper",children:[Object(me.jsx)("h1",{className:"property__name",children:t.title}),Object(me.jsx)(pt,{isPropertyDetail:!0,isFavorite:t.isFavorite,forOffer:t.id})]}),Object(me.jsx)(ft,{rating:t.rating,isPropertyDetail:!0}),Object(me.jsxs)("ul",{className:"property__features",children:[Object(me.jsx)("li",{className:"property__feature property__feature--entire",children:t.type}),Object(me.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[t.bedrooms," Bedrooms"]}),Object(me.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",t.maxAdults," adults"]})]}),Object(me.jsxs)("div",{className:"property__price",children:[Object(me.jsxs)("b",{className:"property__price-value",children:["\u20ac",t.price]}),Object(me.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(me.jsx)(Gt,{features:t.goods})]})}function Bt(e){var t=e.offer;return Object(me.jsxs)("div",{className:"property__host",children:[Object(me.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(me.jsxs)("div",{className:"property__host-user user",children:[Object(me.jsx)("div",{className:"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper",children:Object(me.jsx)("img",{className:"property__avatar user__avatar",src:t.host.avatarUrl,width:"74",height:"74",alt:"Host avatar"})}),Object(me.jsx)("span",{className:"property__user-name",children:t.host.name}),Object(me.jsx)("span",{className:"property__user-status",children:t.host.isPro&&"Pro"})]}),Object(me.jsx)("div",{className:"property__description",children:Object(me.jsx)("p",{className:"property__text",children:t.description})})]})}function Jt(){var e=Object(f.c)(),t=Object(f.d)(kt),a=function(t){var a=!0===t.target.checked?+t.target.value:0;e(Ce(a))};return Object(me.jsx)(me.Fragment,{children:y.map((function(e,r){var s="key-".concat(r);return Object(me.jsxs)(n.Fragment,{children:[Object(me.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:e,id:"".concat(e,"-stars"),type:"radio",checked:t===e,onChange:a}),Object(me.jsx)("label",{htmlFor:"".concat(e,"-stars"),className:"reviews__rating-label form__rating-label",title:"perfect",children:Object(me.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(me.jsx)("use",{xlinkHref:"#icon-star"})})})]},s)}))})}function Wt(e){var t=e.id,a=Object(f.c)(),r=Object(f.d)(kt),s=Object(n.useRef)(null),c=Object(f.d)(Rt),i=null!==s.current&&(s.current.value.length<50||s.current.value.length>300||0===r);return Object(me.jsxs)("form",{className:"reviews__form form",action:"#",onSubmit:function(e){e.preventDefault(),a(function(e){var t=e.id,a=e.comment,r=e.rating;return function(){var e=Object(Be.a)(qe.a.mark((function e(n,s,c){var i;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(T.Comments,"/").concat(t),e.next=3,c.post(i,{comment:a,rating:r}).then((function(){n(Xe(t)),n(Ae("")),n(Ce(0))})).catch((function(){$e.b.info("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f")}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()}({id:t,rating:r,comment:c}))},children:[Object(me.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(me.jsx)("div",{className:"reviews__rating-form form__rating",children:Object(me.jsx)(Jt,{})}),Object(me.jsx)("textarea",{className:"reviews__textarea form__textarea",id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",value:c,ref:s,onChange:function(){null!==s.current&&a(Ae(s.current.value))}}),Object(me.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(me.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set ",Object(me.jsx)("span",{className:"reviews__star",children:"rating"})," and describe your stay with at least ",Object(me.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(me.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:i,children:"Submit"})]})]})}function Zt(e){var t=e.review,a=t.comment,r=t.user,n=t.date,s=t.rating,c={formatedDateShort:ne()(n).format("MMMM YYYY"),formatedDateFull:ne()(n).format("YYYY-MM-DD")};return Object(me.jsxs)("li",{className:"reviews__item",children:[Object(me.jsxs)("div",{className:"reviews__user user",children:[Object(me.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(me.jsx)("img",{className:"reviews__avatar user__avatar",src:r.avatarUrl,width:"54",height:"54",alt:"Reviews avatar"})}),Object(me.jsx)("span",{className:"reviews__user-name",children:r.name})]}),Object(me.jsxs)("div",{className:"reviews__info",children:[Object(me.jsx)("div",{className:"reviews__rating rating",children:Object(me.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(me.jsx)("span",{style:{width:"".concat(se(s),"%")}}),Object(me.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(me.jsx)("p",{className:"reviews__text",children:a}),Object(me.jsx)("time",{className:"reviews__time",dateTime:c.formatedDateFull,children:c.formatedDateShort})]})]})}function Kt(e){var t=e.reviews,a=void 0===t?[]:t;return a=a.slice(0,10),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7",Object(me.jsx)("span",{className:"reviews__amount",children:a.length})]}),Object(me.jsx)("ul",{className:"reviews__list",children:a.map((function(e){var t="".concat(e.id);return Object(me.jsx)(Zt,{review:e},t)}))})]})}function Vt(){var e=Object(f.c)(),t=Object(p.g)(),a=Object(p.h)().id;Object(n.useEffect)((function(){e(ke(void 0)),a&&(e(function(e){return function(){var t=Object(Be.a)(qe.a.mark((function t(a,r,n){var s,c,i,o;return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(T.Offers,"/").concat(e),t.next=3,n.get(s);case 3:c=t.sent,i=c.data,o=Ze(i),a(ge(o));case 7:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}(+a)),e(Xe(+a)),e(function(e){return function(){var t=Object(Be.a)(qe.a.mark((function t(a,r,n){var s,c,i,o;return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(T.Offers,"/").concat(e,"/nearby"),t.next=3,n.get(s);case 3:c=t.sent,i=c.data,o=We(i),a(xe(o));case 7:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}(+a)))}),[e,a,t]);var r=Object(f.d)(Nt),s=Object(f.d)(yt),c=Object(f.d)(wt),i=Object(f.d)(Ee),o=r?r.images.slice(0,6):[];return Object(me.jsx)("div",{children:r&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)("section",{className:"property",children:[Object(me.jsx)(Yt,{images:o}),Object(me.jsx)("div",{className:"property__container container",children:Object(me.jsxs)("div",{className:"property__wrapper",children:[Object(me.jsx)(qt,{offer:r}),Object(me.jsx)(Bt,{offer:r}),Object(me.jsxs)("section",{className:"property__reviews reviews",children:[Object(me.jsx)(Kt,{reviews:s}),i===m.Auth&&Object(me.jsx)(Wt,{id:+a})]})]})}),Object(me.jsx)("section",{className:"property__map map",children:Object(me.jsx)(Lt,{offers:c||[],height:X.height,width:X.width,zoom:Q,lat:r.location.latitude,lng:r.location.longitude})})]}),Object(me.jsx)("div",{className:"container",children:Object(me.jsxs)("section",{className:"near-places places",children:[Object(me.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(me.jsx)("div",{className:"near-places__list places__list",children:c&&Object(me.jsx)(Ot,{offers:c,classes:H,page:L.Property})})]})})]})})}function $t(e){var t=e.exact,a=e.path,r=e.render,n=Object(f.d)(Ee);return Object(me.jsx)(p.b,{exact:t,path:a,render:function(e){return n===m.Auth?r(e):Object(me.jsx)(p.a,{to:j.Login})}})}function Qt(){return Object(me.jsxs)("svg",{width:"240",height:"300",fill:"#a30808",className:"loading",children:[Object(me.jsxs)("rect",{width:"10%",x:"5%",rx:"5%",ry:"5%",children:[Object(me.jsx)("animate",{attributeName:"height",values:"20%; 70%; 20%",dur:"0.7s",repeatCount:"indefinite"}),Object(me.jsx)("animate",{attributeName:"y",values:"40%; 15%; 40%;",dur:"0.7s",repeatCount:"indefinite"})]}),Object(me.jsxs)("rect",{width:"10%",x:"25%",rx:"5%",ry:"5%",children:[Object(me.jsx)("animate",{attributeName:"height",values:"20%; 70%; 20%",dur:"0.7s",begin:"0.15s",repeatCount:"indefinite"}),Object(me.jsx)("animate",{attributeName:"y",values:"40%; 15%; 40%;",dur:"0.7s",begin:"0.15s",repeatCount:"indefinite"})]}),Object(me.jsxs)("rect",{width:"10%",x:"45%",rx:"5%",ry:"5%",children:[Object(me.jsx)("animate",{attributeName:"height",values:"20%; 70%; 20%",dur:"0.7s",begin:"0.3s",repeatCount:"indefinite"}),Object(me.jsx)("animate",{attributeName:"y",values:"40%; 15%; 40%;",dur:"0.7s",begin:"0.3s",repeatCount:"indefinite"})]}),Object(me.jsxs)("rect",{width:"10%",x:"65%",rx:"5%",ry:"5%",children:[Object(me.jsx)("animate",{attributeName:"height",values:"20%; 70%; 20%",dur:"0.7s",begin:"0.45s",repeatCount:"indefinite"}),Object(me.jsx)("animate",{attributeName:"y",values:"40%; 15%; 40%;",dur:"0.7s",begin:"0.45s",repeatCount:"indefinite"})]}),Object(me.jsxs)("rect",{width:"10%",x:"85%",rx:"5%",ry:"5%",children:[Object(me.jsx)("animate",{attributeName:"height",values:"20%; 70%; 20%",dur:"0.7s",begin:"0.6s",repeatCount:"indefinite"}),Object(me.jsx)("animate",{attributeName:"y",values:"40%; 15%; 40%;",dur:"0.7s",begin:"0.6s",repeatCount:"indefinite"})]})]})}var Xt=Object(f.b)((function(e){var t=e.USER,a=e.MAIN;return{authorizationStatus:t.authorizationStatus,isDataLoaded:a.isDataLoaded}}))((function(e){var t=e.authorizationStatus,a=e.isDataLoaded;return function(e){return e===m.Unknown}(t)||!a?Object(me.jsx)(Qt,{}):Object(me.jsxs)(p.d,{children:[Object(me.jsx)(p.b,{exact:!0,path:j.Root,children:Object(me.jsx)(nt,{page:L.Home,isHome:!0,isGrey:!0,children:Object(me.jsx)(zt,{})})}),Object(me.jsx)(p.b,{exact:!0,path:j.Login,children:Object(me.jsx)(nt,{page:L.LogIn,isLogIn:!0,isGrey:!0,children:Object(me.jsx)(Dt,{})})}),Object(me.jsx)($t,{exact:!0,path:j.Favorites,render:function(){return Object(me.jsx)(nt,{page:L.Favorites,children:Object(me.jsx)(Ut,{})})}}),Object(me.jsx)(p.b,{exact:!0,path:"".concat(j.Room,":id"),children:Object(me.jsx)(nt,{page:L.Property,children:Object(me.jsx)(Vt,{})})}),Object(me.jsx)(p.b,{render:function(){return Object(me.jsx)(nt,{page:L.undefined,children:Object(me.jsxs)("div",{className:"container",children:[Object(me.jsxs)("h1",{children:["404.",Object(me.jsx)("br",{}),Object(me.jsx)("small",{children:"Page not found"})]}),Object(me.jsx)(b.a,{to:"/",children:"Go to main page"})]})})}})]})})),ea=a(11),ta=Object(ea.a)({basename:"/six-cities"}),aa=function(e){return function(e){return function(t){return t.type===pe.RedirectToRoute&&ta.push(t.payload),e(t)}}},ra=(a(77),function(e){var t=u.a.create({baseURL:"https://8.react.pages.academy/six-cities",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return(null===a||void 0===a?void 0:a.status)===r.Unauthorized?e():Promise.reject(t)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(d);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){return na.dispatch(Fe(m.NoAuth))}))),na=Object(o.a)({reducer:He,middleware:function(e){return e({thunk:{extraArgument:ra}}).concat(aa)}});na.dispatch(function(){var e=Object(Be.a)(qe.a.mark((function e(t,a,r){var n,s,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get(T.Login);case 3:200===(n=e.sent).status?(s=n.data,c=Ve(s),t(Se(c)),t(Fe(m.Auth))):t(Fe(m.NoAuth)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),$e.b.info("\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,r){return e.apply(this,arguments)}}()),na.dispatch(Qe()),i.a.render(Object(me.jsx)(s.a.StrictMode,{children:Object(me.jsx)(f.a,{store:na,children:Object(me.jsxs)(p.c,{history:ta,children:[Object(me.jsx)($e.a,{}),Object(me.jsx)(Xt,{})]})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.9255fe90.chunk.js.map